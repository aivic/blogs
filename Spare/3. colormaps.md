## Introduction
In the [previous guide](), we focussed on the first two methods related to the integration of React with an already existing jQuery mobile. Our prime objective in this guide is to throw some light on the third approach of integration which is based on the Publisher / Subscriber Model. 

## The Baseline
One of the key advantages of this model is its dynamic approach. It follows a way by which the component as well as the mobile application synchronizes with one another which makes the application of this model a unique one. In this model, the user can authorize the component to listen to the updates coming from the outer end of mobile application. Apart from that, it is also competent enough to send the updates back. Let’s take an example; at the time when the user makes an interaction with an existing mobile application, there are certain events that can trigger approaches which are thereafter dispatched to a React component. This is the reason why it can update itself automatically without any sort of external influence. 

![Imgur](https://i.imgur.com/IDIROAq.png)

In the diagram, one can see the React component applying a Publisher/ Subscriber model in order to listen to the events associated with the parent app. 

The flow chart simply replaced UI manager class via publisher/subscriber model. The response as well as the changes taking place in the background can be observed in the images below:

![Imgur](https://i.imgur.com/ATvXqUW.png)

![Imgur](https://i.imgur.com/BtwMOKw.png)

Kory Becker has presented a live demo for the same which can be accessed on the [given](http://primaryobjects.github.io/jquery-react/example3/index.html) webpage. 

Here, for instance, if user clicks button located inside jQuery app then the event can get dispatched to all the subscribers within the intermediate JS class. That will automatically permit them to act accordingly. 

The implementation of this kind of design with pub/sub manager class can be seen in the programming codes mentioned below:


```javascript
var PubSubManager = {
  subscribers: [],
  subscribe: function(parent, callback) {
    this.subscribers.push({ parent: parent, callback: callback });
  },
  color: function(name) {
    // Notify subscribers of event.
    this.subscribers.forEach(function(subscriber) {
      subscriber.callback(name, subscriber.parent);
    });
  }
};
```

The class which has been mentioned above, has a subscribe approach. The approach enables the clients to get notified of the events taking place from parent application. In this specific case, when color approach is asked by an existing application, it is possible for any number of subscribers to get notified about the change, facilitating them update their internal UIs simultaneously without any sort of manual intervention. 

For instance, take an example of a case where in the image above the current application changed the colour of square present on the page in the fraction of a second. The colour will alter from red to green and vice versa as per the sequence of the codes mentioned below:


```javascript
$(function() {
  setTimeout(function() {
    ReactDOM.render(React.createElement(MyComponent, { context: PubSubManager }), document.getElementById('root'));
  }, 0);
  // Change the box color every few seconds.
  setInterval(function() {
    var box = $('#box');
    var color = box.css('background-color') === 'rgb(255, 0, 0)' ? 'green' : 'red';
    // Change box color.
    box.css('background-color', color);
    // Notify subscribers.
    PubSubManager.color(color);
  }, 1000)
});
```

In the above code, one can see a phase or rather time period to change the square colour in the fraction of every second. In the general circumstances, it is the React component that will have no admission to the right of detecting the changes taking place in the colour of the square. Additionally, it would also not have any direct access for UI element at all. It is basically happening due to the fact that the square is div situated outside range of React component. 

Nevertheless, with the involvement of publisher/ subscriber model, React component will have the authorization to demand notification on every occasion where a change in the square colour takes place. It will enable React component to update own UI with response to the changes taking place in the elements. 

### The React Component
Here, the React method exposes `show` and `hide` methods as shown:


```javascript
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      text: '',
      isVisible: false
    };
    
    this.onSpeak = this.onSpeak.bind(this);
  };
  show(text, callback) {
    this.setState({ isVisible: true, text: text, callback: callback });
  }
  hide() {
    this.setState({ isVisible: false });
  }
  
  onSpeak() {
      this.state.callback('Hello world! This is the MyComponent control.');
  }
  
  render() {
    return (
      <div className = { 'my-component ' + (this.state.isVisible ? '' : 'hidden-xs-up') } >
        <div className = "card" >
          <div className = "card-header" >
            My Component
          </ div>
          <div className = "card-block" >
            <h4 className = "card-title" ></ h4>
            <p className = "card-text" >
              { this.state.text }
            </ p>
            <a href = "#" className = "btn btn-primary" onClick = { this.onSpeak } > Speak </ a>
          </ div>
        </ div>
      </ div>
    );
  }
};
```

## Calling React Component Methods Directly from Outside 
Apart from the above mentioned model and the models that we discussed in the previous guides, the communication in between jQuery and React can take place in reverse fashion. Yes, right from jQuery till React by calling the methods directly inside the React component.

By the time, when the rendering of the React component has been done, one can directly make call methods inside React components. By that approach, the user can take the command of React component from the outside (for instance, via jQuery), calling different methods existing in React class that can alter the state, the UI and the other sorts of behaviour outputs of the React Application. 

## Calling for the React Methods from the Outside 
Let us have a glance over simple example calling React component approach outside of jQuery application.


```html
<button id='btnShow' type="button" class="btn btn-primary">Show</button>
<button id='btnHide' type="button" class="btn btn-primary">Hide</button>
<div id="root" class='mt-5'></div>
<div id="output"></div>
```

The demo can be accessed from [here](https://plnkr.co/edit/E6lPrL331KGxoikGinFm?p=preview).

In the above mentioned HTML code, there are two buttons meant for the display of show and hide. Apart from that, we also have root div, as the phase where the rendering of the React component will take place. Last but not the least; the user will have output div displaying the text generated out of the React component. 

## Conclusion
After the completion of given and [previous guide]() which covers a broad topic like mobile rendering for jQuery and React, we have successfully got an overview of three diverse methods. All three methods are different in their approach and have the capacity of giving a wide range of design methodologies on individual basis permitting React component interaction with the UI components located outside the parameter of its internal elements. 

It is an undeniable fact that there are multiple numbers of ways accessible to procure identical designs. One can even refer jQuery on a direct basis and choose the elements as per convenience. Nonetheless, it wouldn’t allow the user to have access over the scope/context of outer mobile app itself, until the state values being accumulated inside data attributes of HTML components. Else, by allowing the passage of React component in a span of application’s backdrop, the user permits integration of React element to current jQuery mobile app, with slight to no commotion within the rest of the mobile app. 

## Reference
While writing this guide, the following resources have been referred:
- [Kory Becker, Integrating React with an existing jQuery Web Application](http://www.primaryobjects.com/2017/05/08/integrating-react-with-an-existing-jquery-web-application/)
